# Компоненты высшего порядка (модификация компонентов)

__`Компонент высшего порядка`__ — это один из продвинутых способов для повторного использования логики. Упрощенно, это функция, которая принимает компонент и возвращает новый "улучшенный" чем-то компонент. Их принято именовать в стиле `with..`.

Не являются частью `API React`, но часто применяются из-за композиционной природы компонентов: в сторонних библиотеках, например `connect` в __Redux__ и `createFragmentContainer` в __Relay__.

<br>

## Реализация HOC-конструтора
Так происходит дополнение функционала полученного компонента:  
```javascript
const withSomeFeature = baseComponent => 
  return (
    (props) => {
    // Выносим в "конструктор" улучшенных компонентов получение данны с сервера
    const [data, setData] = useState([])

    useEffect(() => {
      getDataFromAPI().then(data => setData( data ))
    }, [])

    return (
      // компонент, получающий эти данные, приходит к нам из аргумента функции-конструктора HOC-ов
      // то есть может быть разный для каждого созданного HOC-а
      // и может, к примеру, как-то иначе отображать полученные данные
      
      <baseComponent products={ data } {...props}/>
      
      // мы также можем прокинуть пропсы, которые может получить HOC-компонент в базовый компонент
    ) 
  )
}
```
Таким образом, мы не допустили дублирования кода по получению продуктов из API - вынеся эту логику в контруктор компонентов HOC.

<br>

## Создание HOC-компонентов
Теперь создаем новые компоненты, передав в HOC-конструтор соответствующий базовый компонент:  
```javascript
const ProductListWithData = withSomeFeature( ProductList )
const ProductTableWithData = withSomeFeature( ProductTable )
```
Оба созданных HOC-компонентов теперь могут получать данные через API - этот общий функционал им дал наш созданный конструтор.

<br>

## Вызов HOC-компонентов
Теперь где-либо в приложении можно использовать HOC-компоненты вызвав их:  
```javascript
const App = () => {
  return (
    <ProductListWithData title={"Список продуктов"} />
    <ProductTableWithData title={"Таблица продуктов"} />
  )
}
```
