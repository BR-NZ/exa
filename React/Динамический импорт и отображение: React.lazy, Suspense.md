# Динамический импорт и отображение: React.lazy, Suspense

## `React.lazy` создаем "ленивый" компонент

* __`Динамический компонент (ленивый)`__  компонент, чей модуль с кодом загружается на сразу на старте приложения, а по надобности при появлении.

* __`React.lazy( компонент )`__ – метод выполняет переданнную ему коллбек-функцию только при первом рендере компонента. Внутри коллбека соответственно нужно произвести динамический импорт модуля.

При первом рендере компонента `Page404` сработает колбек-функция, которая должна осуществить импорт модуля:
```javascript
сonst Page404 = React.lazy( () => import( ../путь_компонента ) )
```

* Компонент в модуле __должен быть экспортирован по умолчанию__;
* Такие динамические импорты должны стоять после статических (иначе ошибка);

<br>

## `Suspense` компонент-оболочка

__`Suspense`__ – специальный компонент-оболочка для работы «ленивой» подгрузки, отвечает за обработку возможных ошибок загрузки модуля, а также отображает «запасной» интерфейс на время загрузки.

Все __«ленивые компоненты»__ должны размещаться внутри `Suspense`:  
```javascript
<Suspense fallback={ запасной-интерфейс }>
<Suspense fallback={ <Spinner /> }>
        .. все «ленивые» (динамические) компоненты
        // Suspense должен оборачивать собой их все
</Suspense>
```

## Важно:
Использование динамических импортов __не уменьшает вес конечного кода в бандле__ – напротив увеличивает. Но она разбивает конечный банлд на большее количество кусков «thunks», таким образом снижает разовую нагрузку на сеть, распределяет ее в течении работы приложения по надобности.
