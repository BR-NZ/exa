# Формы и валидация: Formik + Yup

__`Formik`__ — самая популярная библиотека для удобной работы с формами в `React` и `React Native`. Предоставляет валидацию, работу с событиями и собственные компоненты для форм: типа `<input>`, `<select>`, `<radio>` и подобных, но с зашитой дополнительной функциональностью, таким образом, укорачивая код.  

По сути __библиотека реализована на кастомных хуках__, подобное можно реализовать и самому: данные формы в таком решении хранятся в рамках отдельного вызова функции, то есть в "замыкании".

Другим решением из сторонней библиотеки является хранение данных из формы в отдельном хранилище, например `Redux`. Но оно не слишком удачное, вызывает лишнии обновления и не подходит для средних и более проектов.

Более оптимизированная альтернатива: [`React-hook-form`](https://legacy.react-hook-form.com/ru)

<br>

## Установка
Установка прод-зависимости:  
```
npm i formik
```

Импортируем компоненты библиотеки в модуль, где их будем использовать:  
```javascript
import { Formik } from 'formik'
```

<br>

## Компонент `<Formik>`
* `<Formik>` — главный контролирующий компонент, весь функционал библиотеки находится в его пределах. Он должен возвращать `<form>` через рендер-функцию с множеством аргументов для работы внутри нее. Он связывается с элементами формы по их `name`-атрибуту.

### Пропсы `<Formik>`: 
* `initialValues` — содержит объект с начальными значениями элементов формы. Свойства объекта это `name`-атрибуты элементов формы, а значения свойств это их значения по умолчанию;
* `errors` — объект по структуре схожий с `initialValues`, его свойства это `name`-атрибуты элементов формы. Но в значениях он содержит ошибки для каждого элемента;
* `initialValues` — принимает функцию валидации значения элемента формы, она будет вызвана для каждого элемента формы при изменении его значения, текущее значение попадет в функцию валидации как аргумент, где его можно анализировать и предпринимать действия. Например, записать в объект `errors` ошибку для того или иного элемента формы.

<br>

## Типовой пример
Лучше всего понять принцип можно на общем примере:  
```javascript
const App = () => (
<Formik
   initialValues={{ email: '', password: '' }}
   validate={values => {
               const errors = {};
               if (!values.email) {
                 errors.email = 'Required';
               } else if (
                 !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(values.email)
               ) {
                 errors.email = 'Invalid email address';
               }
               return errors;
   }}
   onSubmit={(values, { setSubmitting }) => {
               setTimeout(() => {
                 alert(JSON.stringify(values, null, 2));
                 setSubmitting(false);
               }, 400);
   }}
>
  
   {({ isSubmitting }) => (
     <Form>
       <Field type="email" name="email" />
       <ErrorMessage name="email" component="div" />
       <Field type="password" name="password" />
       <ErrorMessage name="password" component="div" />
       <button type="submit" disabled={isSubmitting}>
         Отправить
       </button>
     </Form>
   )}
   
  </Formik>
);
```
