# Анимации: React Transition Group, Motion

__`React-transition-group`__ - легковесная библиотека для обработки изменений состояний компонента, помогает удобно реагировать на переходы в React-приложениях. Позволяет декларативно описать переход от одного состояния компонента к другому с течением времени.

Под переходом подразумевается изменение то есть "появления" (монтирование), "исчезновения" (размонтироваание) частей интерфейса (компонентов, элементов). 

__Билиотека__:  
* __Позволяет__ описать стили для того или иного этапа жизни компонента (`state`);
* __Предоставляет__ возможность обработки событий в процессе переходов: "что нужно сделать в таких-то этапах жизни компонента";
* __Не дает__ интрументария для действий над компонентами: монтирование, размонтирование;
* __Не содержит__ сами CSS-анимации, классы и прочее;

То есть действия с компонентами мы реализуем сами, а библиотека лишь позволяет описать как стиль компонентов должен реагировать на эти события.
Чаще всего библиотека используется для анимации монтажа и демонтажа компонента, но также может использоваться для описания переходных состояний.

<br>

## Установка в проект:
Добавляем прод-зависимость
```
npm i react-transition-group
```
Импортируем в модуль компонента
```javascript
import { Transition, CSSTransition, SwitchTransition, TransitionGroup } from 'react-transition-group'
```

<br>

## Составляющие
Для этих целей у библиотеки есть 4 компонента:

<br>

### Главные компоненты `<Transition>` и `<CSSTransition>`
Они выполняют основные функции библиотеки: 
1. Получают `inline-стили` или готовые `css-классы` для разных состояний компонента;
2. Воспроизводят переданные им стили в разных состояниях компонента;
3. Предоставляют свои события этого процесса и дают возможность на них реагировать в колбек-функциях;

Оба компонента внутри себя содержат `рендер-функцию`, которая должна внутри __конфигурировать особым образом__ и __вернуть отображаемый компонент__.

__В чем разница:__ <Transition> будет задавать компоненту разные `inline-стили` под каждое состояние, <CSSTransition> будет просто изменять ему `css-класс`.


<br>

## Существует 4 основных состояния `state`:
<img title="Изменение in и состояния" alt="Изменение in и состояния" width="650" src="https://github.com/BR-NZ/synopsis/assets/24506129/11c5e825-10f7-45b0-b871-4015145c4b47">
* `entering` – процесс "вхождения", длиной `timeout` секунд;
* `entered` – уже "вошел";
* `exiting` – процесс "выхождения", длиной `timeout` секунд;
* `exited` – уже "вышел";

<br>

## Они вызывают 6 событий:
<img title="Изменение in и события" alt="Изменение in и события" width="650" src="https://github.com/BR-NZ/synopsis/assets/24506129/de52d31b-623c-4d53-ab23-1fe316a3e30d">

<br>

## Пропс `in` - самый важный
__`props-in`__ – ключевой пропс компонентов `<Transition>` и `<CSSTransition>` библиотеки, принимает только `bool`-значения, которыми переключает состояния компонента

Когда пропс-`in` переходит:  
1.  __Из `true` в `false`__
* Состояние `state` компонента меняет значение: `exiting` на `exited`
* На компоненте происходят по порядку 3 события: `onEnter`  → `onEntering` → `onEntered`
2.  __Из `false` в `true`__
* Состояние `state` компонента меняет значение: `entering` на `entered`
* На компоненте происходят по порядку 3 события: `onExit` → `onExiting` → `onExited`

<br>

### `<Transition>` (инлайн-стили перехода)
Это базовый компонент, который не использует никаких CSS-классов проекта, вместо этого он задает inline-стили прямо в коде компонента.

Наглядный пример применения:  
```javascript
const duration = 300;

// объект-стилей базовых (не привязанных к состоянию)
const defaultStyle = {
  transition: `opacity ${duration}ms ease-in-out`,
  opacity: 0,
}

// объект-стилей под разные состояния (state)
const transitionStyles = {
  entering: { opacity: 1 },
  entered: { opacity: 1 },
  exiting: { opacity: 0 },
  exited: { opacity: 0 },
};

someComp = (props) {
  const nodeRef = useRef(null);
  return (
    <Transition in={props.in} timeout={duration} nodeRef={nodeRef}>
      {
      state => (
        <div ref={nodeRef} style={{
          ...defaultStyle, // базовые стили будут всегда (на любом state)
          ...transitionStyles[state] // под каждый state добавятся свои стили
        }}>
          I'm a fade Transition!
        </div>
      )
      }
    </Transition>
  )
}
```

<br>

### `<CSSTransition>` (класс перехода)
Этот компонент основан на `<Transition>` и имеет те же пропсы, работает по тому же принципу, но задает стили в виде `css-классов`. 

Чтобы классы корректно применялись в зависимости от состояния компонента, они должны именоваться в определенном стиле. А именно, в пропсе `classNames` задается префикс всех классов. 

### `<SwitchTransition>` (вариант перехода)


### `<TransitionGroup>` (обертка)
  

<br>

