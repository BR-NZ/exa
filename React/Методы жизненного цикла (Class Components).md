# Методы жизненного цикла (Хуки у классовых компонентов)

![Диаграмма ЖЦ](https://github.com/BR-NZ/synopsis/assets/24506129/d37dd4e1-d13a-49b1-8236-3e20be960df6)

* __`Constructor()`__ – вызывается при каждом создании нового экземпляра компонента. Подойдет для полей класса и инициализации состояния компонента на основе полученных пропсов напрямую, без вызова `setState()`.
* __`Render()`__ – единственный обязательный метод классового компонента. При вызове он проверяет `State` и `Props`. В нем не стоит изменять состояние компонента. 
* __Никаких эффектов: в конструторе и рендере компонентов.__

<br>

## Как происходит процесс `MOUNTING`
```javascript
constructor() → render() → componentDidMount()
```
componentDidMount() – вызывается после того, как компонет впервые попал в DOM.
Оптимально выполнять в нем процессы требующие уже построенного DOM, подписываться на события, слать запросы к API на сервер (не в конструкторе).

<br>

## Как происходит процесс `UPDATE`
```javascript
new props/state → render() → componentDidUpdate(prevProps, prevState)
```

`componentDidUpdate(prevProps, prevState)` – вызывается после обновления состояния или свойств компонента. Первая инициализация компонента в DOM не вызывает `componentDidUpdate()`, для этого в нем отрабатывает `componentDidMount()`.

__Что в нем делают:__  
Метод __позволяет работать с DOM__ при обновлении компонента, подходит для сетевых запросов, которые выполняются на основании сравнения версий пропсов, в каких-то случаях обновление может не потребоваться.

__Что НЕ делают:__  
Менять состояние `setState()` внутри метода можно только в условии, например когда какой-то prevProps !== props. Иначе можно создать бесконечный цикл - ведь изменение состояния без условия, всегда будет вызывать в свою очередь новый апдейт с изменением состояния.


<br>

## Как происходит процесс `UNMOUNTING`
`componentWillUnmount()` – вызывается при удалении компонента из DOM. 

__Что в нем делают:__  
* Очищают ресурсы, с которыми взаимодействовал компонент: отписываются от событий, удаляют интервалы, отменять запросы к серверу или отписываются от веб-сокетов, чтобы не допустить утечки памяти.

__Что НЕ делают:__  
* Не меняют состояние `setState()`__ так как следующего рендера уже не будет - и изменения мы не увидим.
