# ⚡ useEffect: создание эффектов

__`Побочные действия «эффекты»`__ – это операции по загрузке данных, запуск таймаутов, логгированию, работа с внешними модулями или с DOM-деревом.

```javascript
useEffect( callback(), [ fields… ] )
```

<br>

## Создаем эффект:
Передаем ему колбек-функцию и массив свойств. Хук закрепит функцию за компонентом и будет вызывать только в случае изменения одного из переданных в массиве свойств.

* __`Колбек-функция «выполнитель»`__ хранит в замыкании актуальное значение свойства, которое отслеживает. При каждом рендере создается эта функция (как и весь код функции-компонента) создается и выполняется заново, это позволяет избежать багов с замыканиями. 
* __`Массив зависимостей`__ – список свойств состояния или пропсов, которые нужно отслеживать и выполнять функцию.

<br>

## Эффект будет вызываться:
* __Без аргумента__ – 1 раз после рендеринга (монтирования) компонента, а потом каждый раз при апдейте компонента. То есть объединит фунционал componentDidMount и componentDidUpdate.
* __С передачей свойств массива__ – 1 раз после рендеринга (монтирования) компонента, а потом каждый раз при изменении зависимостей. То есть объединит фунционал componentDidMount и componentDidUpdate для свойства.
* __С передачей пустого массива__ – только 1 раз после монтирования компонента. То есть заменит componentDidMount от классов.

<br>

## Отписка от эффектов:
* __Эффекты-подписки__ (`таймауты`, `обработчики событий` или `соединений с сервером`) и все, что может существовать длительное время необходимо отчищать после размонтирования компонента, иначе компонент будет сохраняться в памяти.
* Чтобы __осуществить отписку от эффектов__, созданных в функции выполнителе, в ней же мы должны вернуть другую колбек-функцию, в теле которой производим эти действия (удаляем подписку на событие, таймер и пр.). Эта функций будет вызвана когда компонент прекратит существование.

## Плюсы:
- [x] Хук избавляет от дублирования кода, экономит место;
- [x]	Одни и те же действия больше не нужно разносить на монтирование и апдейт, хук эффекта объединяет оба метода ЖЦ;
* [x]	Благодаря созданию нескольких обработчиков эффектов, мы можем навешивать разные действия на изменения разных зависимостей. А не производить все действия в одном методе апдейта, разбираясь внутри какое свойство состояния было изменено.
