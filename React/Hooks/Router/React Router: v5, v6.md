# React Router: v5, v6

__`React Router`__ – библиотека маршрутизации между страницами (компонентами) внутри приложения.

<br>

## Импортируем:
```javascript
V5+
import { BrowserRouter as Router, Switch, Route, Link, NavLink } from “react-router-dom”
V6+
import { BrowserRouter as Router, Routes, Route, Link, NavLink } from “react-router-dom”
// импортируем ключевые сущности (компоненты) библиотеки
```

<br>

## Составляющие:
* __`BrowserRouter`__ – главный компонент, отслеживающий всю работы с путями, внутри него помещают все пути и компоненты приложения, для использования роутинга. Он предоставляет `History API`.
* __По умолчанию__, роутер работает в режиме `композиции` и `неточных совпадений` путей. То есть сработают все пути имеющим совпадение `подстроки с url-браузера` (но это поведение можно изменить).

* __`Switch (v5)`__ – специальный компонент оболочка, хранящий внутри пути, он работает по принципу первого неточного совпадения нашего url-браузера и одного из путей. 
* __`Routes (v6)`__ – прешедшая на замену более мощная версия свитча, работает схоже, но: 
  * Все `Route` и `Link` внутри него __относительны__;
  * `Route` внутри него срабатывают __по наибольшему совпадению__, а не по порядку – то есть теперь пути можно размещать в любом порядке;
  * Поэтому, все пути можно отобразить в одном месте, вкладывая их друг в друга, а не разбрасывать по вложенным компонентам.
* __`Route`__ – ключевой элемент, хранящий как свой путь (по которому он срабатывает), так и сам компонент приложения (который он должен отдать).

<br>

## Создание путей:
__В версиях V5:__  
```javascript
<Route [exact] path="..путь"> <Компонент [prop={ проп }]/> </Route>

// + exact (атрибут) – путь сработает только при полном равенстве с url-браузера
// Вложенные Route размещают внутри компонента-приложения, от которого идет путь
// То есть внутри компонента внешнего Route, размещают дочерние Route с путем типа: ${match.url}/подпуть
```
__В версиях V6:__  
```javascript
<Route path="..путь" element={ <Компонент [prop={ проп }/> }/>

// - exact – был удален за ненадобностью, благодаря новому алгоритму сравнения
// Компонент приложения теперь хранится внутри пропса elementу
// Внутри тега Route можно хранить дочерние вложенные Route
// Специальный компонент <Outlet /> – помещают во внешнем компоненте, на его мести и будут происходить рендеры дочерних Route
```

<br>

## Создание ссылок:
* __`Link`__ – аналог ссылки, рендерится в тег `<a href>`, его нажатие изменяет url-браузера, после чего срабатывает соответствующий `Route`.

__V5: Если на url:/user кликаем на:__  
•	<Link to=”alex” /> – попадем на url:/alex
•	<Link to=”/alex” /> – попадем на url:user/alex

__V6: Ссылки внутри Route всегда относительны:__  
•	в любом случае попадем на url:user/alex
•	<Link to=”.” /> – url не изменится (останемся)
•	<Link to=”..” /> – url сократится до / (уровень выше до родительского Route)
•	<Link to=”../me” /> – url сократится до / и добавится me (на соседнюю)

* __`NavLink`__ – аналог `Link`, но с возможностью стилизации активного состояния (когда url-браузера совпадает с ним).

__V5: Имеет атрибуты установки активного стиля (убраны в V6):__  
```javascript
activeStyle = { color: “red” } ; 
activeClassName = ” active-class ” ;

// exact (атрибут) для задания активности по строгому сравнению (а не подстроки)
```

__V6: В style и className передается колбек с флагов активности в аргументе:__  
```javascript
style={ ({ isActive }) => ({color: isActive ? “red” : null}) }
className={ ({ isActive }) => isActive ? “active” : null }

// exact переименован в end
```

`Redirect` – компонент перенаправления на другой адрес, который можно помещать в условиях, в случае когда он им отдан.

```javascript
logged ? <Redirect to="/dashboard" /> : <PublicHomePage />
```

`useHistory (v5)` – хук, работающий с historyAPI, который управляет навигацией в браузере, переходы «вперед/назад» и добавление, замена и изменение истории переходов страниц.
`useNavigate (v6)` – хук, работающий с historyAPI.
Хук `useRouteMatch (V5)` переименован в `useMatch (V6)`.

<br>

## React-router содержит 4 интересных объекта:
* match
* history – для орагнизации переходов между страницами. Содержит методы goBack, goForward и пр.
* location – объект хранит состояние и положение нашего роутера.
* useParams – хук, при выполнении отдает объект, который хранит ключ-значение из url-браузера.
