# DOM: поиск узлом, изменение, перемещение

__Обобщенно существует 2 вида узлов:__ узлы __`Nodes`__ и элементы __`Elements`__.

* `Элемент` – это узел представленный HTML-тегом (парным или одинарным).
* `Узел` – более широкое понятие элемента, он может быть текстом без тега, комментарием или самим элементом.
* `Псевдоэлемент` – является частью shadow-DOM, получить ссылку на него нельзя.

Элемент с установленным `id аттрибутом` сразу становится значением свойства глобального объекта `window`. При обращении к `свойствам window` его имя можно пропускать, то есть к элементам с `id` можно обращаться напрямую через id-значение.

Существует два вида коллекций ссылок на элементы: __`HTMLCollection`__ и __`NodeList`__.
Они являются псевдомассивами (объектами), то есть их элементы `имеют индекс` и свойство `length`, они перебираемы в цикле `for..of`, но они __не имеют методов массивов__.

* HTMLCollection – __«живая» коллекция__, недоступная для записи и хранящая актуальные элементы, обновляющаяся при их удалении или добавлении (хранит только узлы-элементы).
* NodeList – __«статичная» коллекция__ элементов, не реагирует на изменения в DOM. Имеет метод `forEach()` и хранит все типы узлов.

Все коллекции доступны __только для чтения__, нельзя удалить или заменить элемент. 

Часть методов работает и с `Node` и с `Element` узлами, а часть только с `Element`.

<br>

## Изменение

`D.createDocumentFragment` – создает элемент-контейнер, который не отображается в DOM, нужен для накопления в себе других элементов перед пемещением в DOM.
`N.cloneNode(true/false)` – создает копию узла, если true то вместе с вложенными.
`E.remove()` – открепляет элемент от родителя из DOM-дерева, в последствии он может быть удален из памяти сборщиком мусора.
`E.innerHTML` – устанавливает или получает HTML разметку дочерних элементов.
`N.textContent` – задавать и получать текст из узла и его потомков.
`E.style.csstext` – задает строку в формате css с любыми свойствами.
`E.style.[someCSSprop]` – задает css свойство элемента в виде css-строки.
`E.value = 1` – устанавливает значение аттрибута value у элемента (без отрисовки).
`E.setAttribute(‘name’, ‘value’)` – добавляет или изменяет значение аттрибута E.
`E.getAttribute(‘name’)` – возвращает значение аттрибута E.
`E.removeAttribute(‘name’)` – удаляет аттрибут и значение E.
`E.classList` – возвращает псевдомассив всех классов элемента.
`E.classList.add(‘cls1’, ‘cls2’)` – добавляет элементу класс.
`E.classList.remove(‘cls1’, ‘cls2’)` – удаляет у элемента классы.
`E.classList.toggle(‘cls1’)` – преключатель добавляет или удаляет класс у элемента.
`E.classList.contains(‘cls1’)` – проверяет наличие класса у элемента true/false.

<br>

## Чтение

`window.getComputedStyle(el)` – возвращает живой объект CSSStyleDeclaration, со свойствами из значений всех свойств элемента в данный момент после применения всех таблиц стилей, инлайн стилей или вычислений (доступен только для чтения).
`E.style` – возвращает тот же живой объект стилей, но доступный для изменения.
`E.clientWidth` – возвращает ширину блока+паддинги (без бордера и маргина) и вычитая ширину скроллбара.
`E.clientHeight` – возвращает высоту блока+паддинги (без бордера и маргина) и вычитая высоту скроллбара.
`E.offsetWidth` – возвращает реальную графическую ширину блока + паддинги + границы + скроллбар.
`E.offsetHeight` – возвращает реальную графическую высоту блока + паддинги + границы + скроллбар.
`E.scrollWidth` – возвращает полную ширину элемента и его содержимого, как если бы его содержимое не пришлось скроллить.
`E.scrollHeight` – возвращает полную высоту элемента и его содержимого, как если бы его содержимое не пришлось скроллить.

Свойства client*, offset*, scroll* доступны только для чтения и равны нулю у d:inline-none или элементов без CSS-стилей. Значения в пикселях, округленные до целых.

`E.getBoundingClientRect()` – возвращает объект, его свойства это координаты относительно окна браузера и размеры минимального блока, которой поместит в себе вызвавший элемент. Значения объекта могут быть нецелыми пикселями.
__Расшифровка свойств полученного объект:__
```javascript
x (до верха окна), 
y (до лева окна), 
width (ширина блока), 
height (высота блока), 
top = y, 
bottom = y + height (до низа окна), 
left = x, 
right = x + width(до права окна).
```

`window.pageXOffset` – координаты X начала окна (view) от начала документа (doc).
`window.pageYOffset` – координаты Y начала окна (view) от начала документа (doc).
`E.scrollTop` – возвращает или устанавливает пиксели, прокрученные от верха элемента.

<br>

## Поиск узлов

`D.getElementById()` – возвращает элемент по `id`.
`D.querySelector(selector) – возвращает первого E по селектору (иначе null).
`D.querySelectorAll(selector)` – возвращает статичную NodeList по селектору.
`E.matches(selector)` – вернет true/false если E соотвествует селектору.
`E.getElementsByClassName(‘cls1 cls2’)` – возвращает HTMLCollection со всеми дочерними элементами по заданным классам.
`N.parentNode` – возвращает родителя узла, если он есть, иначе null.
`N.parentElement` – возвращает родителя узла, если он есть и E, иначе null.
`E.children()` – возвращает живую HTMLCollection со всеми дочерними элементами.
`N.childNodes()` – возвращает живую HTMLCollection со всеми дочерними узлами.
`N.first/lastChild` – возвращает первого/последнего потомка из узлов.
`E.first/lastElementChild` – возвращает первого/последнего потомка из элементов.
`N.next/previousSibling` – возвращает соседний до/после узел, иначе null.
`N.next/previousElementSibling` – возвращает соседний до/после элемент, иначе null.

<br>

## Перемещение, замена
`E.prepend(…els)` – добавляет узел или узлы в начало тэга-элемента.
`E.append(…els)` – добавляет узел или узлы в конец тэга-элемента.
`E.replaceChildren(…els)` – заменяет потомоков новыми узлами.
`E.replaceWith(els…)` – заменяет E на элементы из параметров метода.
`Nparent.replaceChild(newChild, oldChild)` – заменяет один элемент на другой относительно родителя, возвращает замененный эоемент.
E.insertAdjacentElement( ‘position’, elem) – добавляет переданный элемент в DOM-дерево в место относительно элемент его вывзвавшего.
(‘beforebegin’ / ‘afterbegin’ / ‘beforeend’ / ‘afterend’ )
