# Функции-конструкторы, классы и прототипы

В `javascript` все типы данных основаны на объектах.  

<img width="650" alt="Диаграмма наследования" title="Диаграмма наследования" src="https://github.com/BR-NZ/synopsis/assets/24506129/390c56c8-a432-45cb-ba50-3e88ecc541a6">

* `__proto__` – гетер закрытого свойства [[Prototype]] ссылается на объект-прототип, содержащий общие свойства и методы для всех экземпляров, оно есть у всех созданных экземпляров (новый статический метод `Object.getPrototypeOf(obj1)`)

* `prototype` – это свойство есть только у классов и функций, также ссылается на объект прототипа, который будет присвоен экземплярам, созданным на основе этих функций и классов.

<img width="650" alt="Диаграмма функции-конструктора и экземпляров" title="Диаграмма функции-конструктора и экземпляров" src="https://github.com/BR-NZ/synopsis/assets/24506129/c338645d-e15e-4cdd-b880-2e9a37c10fb4">

<br>
<br>

## Примеры:
1.	Свойство `__proto__` созданного объекта === свойству `prototype` его конструктора (функции или класса), они ссылаются на один и тот же объект-прототип.
```javascript
object1.__proto__ === Object.prototype === object2.__proto__
```
2.	Примитив тоже создает временную объект-оболочку с помощью своего конструктора (например «Number»). 
```javascript
age.__proto__ === Number.prototype
```
3.	Классы и функции произошли от функции-конструктора – поэтому у них один общий объект-прототип.
```javascript
someClass.__proto__ === Function.prototype === someFunc.__proto__
```

<br>

## Оператор `instanceof`
Оператор `instanceof` проверяет, принадлежит ли сущность к определённому классу или функции-конструктору (создан ли он или его предок на их основе). 

_Другими словами:_  
```javascript
[object] instanceof [constructor]
```

Проверяет наличие объекта прототипа данного конструктора `constructor.prototype` в цепочке наследований прототипов объекта `object.__proto__.__proto__`...

<br>

## Классы
Классы основаны на функциях – это синтаксический сахар, у них один тип данных:   
```javascript
typeof Class1 === typeof func1
// true - классы и функции имеют один тип 'function'
```

Другими словами класс - упрощенная конструкция функции конструктора с прототипом:  
```javascript
class User {
	constructor(name) {
		// this.данные в конструкторе попадут в каждый экземпляр класса new User()
		this.name = name
	}

	// методы снаружи констуктора попадут в общий прототип класса User.Prototype
	sayHi() { alert(this.name) }
}
```

Это то же самое:  
```javascript
function User(name) {
	this.name = name
}

// прямая запись в прототип
User.Prototype = {
	sayHi: function() { alert(this.name) }
}
```
