# NPM
__npm-пакеты (зависимости)__ – упрощенно, это различные куски кода, лежащие на разных серверах, которые мы можем подтягивать для работы в своем проекте.

Но чтобы иметь возможность использовать сторонние npm-пакеты, нашему проекту самому предстоит стать отдельным npm-пакетом.
Вместе – модуль проекта и модули подключенных зависимостей представляют связанное дерево из модулей. Вершина дерева – и есть наш проект (новый пакет). Ветви - задействованные в нашим проекте пакеты (зависимости), а они могут ссылаться на другие пакета.

## Обновить node.js
```
node -v (--version) // узнать текущую версию
npm i -g n // установить глобально утилиту «n» для обновления
n latest (stable) // установить последнюю (стабильную) версию node.js
```

<br>

## 1.	Инициализация 
Перевести наш обычный проект в состояние npm-пакета можно в терминале в папке проекта (для этого на системе должен быть установлен node.js):
```
npm init //иницализируем менеджер пакетов в папке проекта
```
Далее поочередно указываем:  
```
- package name : название_проекта (по умолчанию название папки)
- version : версия_нашего_проекта (по умолчанию 1.0.0)
- description : текст_описания_проекта
- entry point : главный_файл_проекта (точка вхождения в проект)
- test command : команда_для_тест
- git repository : url_адрес_проекта_git
- author : имя_автора
- license : тип_лицензии
```
__package.json__ – после удачной настройки npm-проекта в папке появится файл, который и будет содержать все введенные ранее данные о проекте.

<br>

## 2.	Установка пакетов
```
[sudo] npm i (флаг) (параметр_настройки) имя_пакета
```
Установка сторонних пакетов себе в проект возможна двумя способами: __локально и глобально__.  
Локальные пакеты могут быть двумя типами зависимостей: __прод и дев___.  

__Глобальная установка__ – пакет будет работать в различных проектах в рамках системы, используется реже, обычно это какие-то общие инструменты тестирования или сборки.  
* Пакет попадет в папку node_modules пользователя системы
* Приставка `sudo` для unix-систем
* Нужен флаг `-g`

__Локальная установка__ – пакет будет работать в рамках папки проекта, когда именно этот проект используется данный пакет этой версии.
* Пакет попадет в папку node_modules проекта
* Ничего добавлять не надо

__"Дев зависимости"__ – нужные только при разработке, не попадут в рабочий билд при сборке.  
* В package.json пропишутся в массиве "dependencies".
* Параметр настройки: `--save-dev (укороченно -D)`  

__"Прод зависимости"__ – пакеты, без которых проект не работает, попадут в продакшен билд.  
* В package.json пропишутся в массиве "devDependencies".
* Параметр настройки:  `--save (укороченно -S)`  

C версии npm 5.0 директиву `--save` __писать не обязательно__.  

`node_modules` – после установки первого пакета (локального) в проекте появится эта папка, она содержит загруженный подключенный пакет, а также его зависимости, то есть пакеты, на которые он ссылается по всем веткам до начальных.  

`package.json` содержит перечень зависимостей с диапазоном их версий:  
* Символ ^ позволяет загружать модули с точностью версии 1.X.X 
* Символ ~ позволяет загружать модули с точностью версий 1.1.X

`package-lock.json` – содержит перечень зависимостей с точным номером их версий, как они были у автора на момент создания проекта.  

Папка `node_modules` включена в файл `.gitignore` и не попадает в репозиторий – чтобы не нагружать трафик github. Но туда попадают файлы package.json и package-lock.json со ссылками на них.  
Поэтому при развертывании (клонировании) любого проекта с git-репозитория, который имеет зависимости нужно выполнить процедуру __первоначальной установки зависимостей__:  
```
npm i 
// грузим зависимости по перечню и в версии диапазона package.json
// если версии не совпадут с package-lock.json он будет перезаписан

npm ci
// грузим зависимости по перечню и с точной версией из pack-lock.json
// в этом случае гарантируется точно соответствие дереву автора
```

<br>

## 3. Подключение акета (его части) в модуль
После установки пакета в `node_modules` мы должны подключить (импортировать) его функциональность в нужный нам js-модуль.
```javascript
import ‘jquery’; //название без пути достаточно для вебпака (если модуль из node_modules)
```
Теперь в коде модуля, который совершил импорт, можно обращаться к сущностям и функционалу импортированного пакета.
